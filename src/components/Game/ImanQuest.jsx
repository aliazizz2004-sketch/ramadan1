import React, { useState } from 'react';
import { motion, AnimatePresence } from 'framer-motion';
import { Award, ChevronRight, ChevronLeft, RefreshCw, Star, BookOpen, Moon, Sparkles, ArrowRight, Info, Book, CheckCircle2, Bookmark, Heart } from 'lucide-react';

// 1. General Quiz Questions (20 items)
const quizQuestions = [
    {
        question: "ئامانجی سەرەکی ڕۆژوو گرتن لە ڕەمەزاندا چییە؟",
        options: ["لاوازبوون", "بەدەستهێنانی تەقوا (ترسی خودا)", "پاشەکەوتکردنی پارە", "زیاتر خەوتن"],
        correct: 1,
        explanation: "وەک لە سورەتی بەقەرە (٢:١٨٣) هاتووە، ڕۆژوو فەرز کراوە بۆ ئەوەی تەقوا بەدەست بهێنن."
    },
    {
        question: "کام شەو باشترە لە هەزار مانگ؟",
        options: ["شەوی یەکەم", "شەوی پازدە", "شەوی قەدر", "شەوی کۆتایی"],
        correct: 2,
        explanation: "شەوی قەدر ئەو شەوەیە کە قورئان تێیدا دابەزی."
    },
    {
        question: "خواردنی پێش بەربانگ چی ناوی لێ دەنرێت؟",
        options: ["بەربانگ", "سەحەر", "نانی ئێوارە", "نانی نیوەڕۆ"],
        correct: 1,
        explanation: "سەحەر ئەو خواردنەیە کە موسڵمانان پێش بەربانگ دەیخۆن لە ڕەمەزاندا."
    },
    {
        question: "کام جەنگ لە مانگی ڕەمەزاندا ڕوویدا؟",
        options: ["شەڕی ئوحود", "شەڕی بەدر", "شەڕی خەندەق", "شەڕی خەیبەر"],
        correct: 1,
        explanation: "شەڕی بەدر، یەکەم شەڕی گەورەی ئیسلام، لە ١٧ی ڕەمەزاندا ڕوویدا."
    },
    {
        question: "قورئانی پیرۆز چەند سورەتی هەیە؟",
        options: ["١١٠", "١١٦", "١١٤", "١٢٠"],
        correct: 2,
        explanation: "قورئان ١١٤ سورەتی هەیە."
    },
    {
        question: "کام پێغەمبەر ماسییەکی گەورە قووتی دا؟",
        options: ["ئیبراهیم", "موسا", "یونس", "عیسا"],
        correct: 2,
        explanation: "یونس پێغەمبەر لەلایەن ماسییەکی گەورەوە قووت درا و سێ شەو و ڕۆژ لە ناوییەوە مایەوە."
    },
    {
        question: "چەند ڕوکنی ئیسلام هەیە؟",
        options: ["٣", "٤", "٥", "٦"],
        correct: 2,
        explanation: "پێنج ڕوکنی ئیسلام هەیە: شەهادەت، نوێژ، ڕۆژوو، زەکات، و حەج."
    },
    {
        question: "کام سورەت یەکەم سورەتی قورئانە؟",
        options: ["سورەتی بەقەرە", "سورەتی فاتیحە", "سورەتی یاسین", "سورەتی ئیخلاس"],
        correct: 1,
        explanation: "سورەتی فاتیحە یەکەم سورەتی قورئانە و حەوت ئایەتی هەیە."
    },
    {
        question: "کام مانگ مانگی پیرۆزی ڕەمەزانە لە ڕۆژژمێری ئیسلامیدا؟",
        options: ["مانگی ٧", "مانگی ٨", "مانگی ٩", "مانگی ١٠"],
        correct: 2,
        explanation: "ڕەمەزان نۆیەم مانگی ڕۆژژمێری ئیسلامییە."
    },
    {
        question: "کام کتێب لەسەر پێغەمبەر موسا دابەزی؟",
        options: ["قورئان", "ئینجیل", "تەورات", "زەبوور"],
        correct: 2,
        explanation: "تەورات لەسەر پێغەمبەر موسا دابەزی."
    },
    {
        question: "کام پێغەمبەر باوکی پێغەمبەرانە؟",
        options: ["نوح", "ئیبراهیم", "ئادەم", "موسا"],
        correct: 1,
        explanation: "ئیبراهیم پێغەمبەر بە باوکی پێغەمبەران ناسراوە چونکە زۆربەی پێغەمبەران لە نەوەی ئەون."
    },
    {
        question: "چەند جار لە ڕۆژێکدا نوێژ دەکەین؟",
        options: ["٣ جار", "٤ جار", "٥ جار", "٦ جار"],
        correct: 2,
        explanation: "موسڵمانان ٥ جار لە ڕۆژێکدا نوێژ دەکەن: بەیانی، نیوەڕۆ، عەسر، مەغریب، و عیشا."
    },
    {
        question: "کام سورەت کۆتا سورەتی قورئانە؟",
        options: ["سورەتی ناس", "سورەتی فەلەق", "سورەتی ئیخلاس", "سورەتی کەوسەر"],
        correct: 0,
        explanation: "سورەتی ناس کۆتا سورەتی قورئانە و ٦ ئایەتی هەیە."
    },
    {
        question: "کام شار قیبلەی موسڵمانانە؟",
        options: ["مەدینە", "قودس", "مەکە", "بەغدا"],
        correct: 2,
        explanation: "مەکە قیبلەی موسڵمانانە و تێیدا کەعبەی پیرۆز هەیە."
    },
    {
        question: "کام پێغەمبەر کەشتییەکی گەورەی دروست کرد؟",
        options: ["نوح", "ئیبراهیم", "موسا", "یوسف"],
        correct: 0,
        explanation: "نوح پێغەمبەر بە فەرمانی خوا کەشتییەکی گەورەی دروست کرد بۆ ڕزگاربوون لە لافاو."
    },
    {
        question: "کام پێغەمبەر لە ئاگردا فڕێدرا بەڵام نەسووتا؟",
        options: ["ئیبراهیم", "موسا", "عیسا", "موحەممەد"],
        correct: 0,
        explanation: "ئیبراهیم پێغەمبەر لەلایەن نمرودەوە فڕێدرایە ناو ئاگر بەڵام خودا ئاگرەکەی کرد بە فێنک و سەلامەت."
    },
    {
        question: "کام ڕۆژ ڕۆژی جومعەیە لە هەفتەدا؟",
        options: ["ڕۆژی یەکشەممە", "ڕۆژی دووشەممە", "ڕۆژی هەینی", "ڕۆژی شەممە"],
        correct: 2,
        explanation: "ڕۆژی هەینی ڕۆژی جومعەیە و گرنگترین ڕۆژی هەفتەیە بۆ موسڵمانان."
    },
    {
        question: "کام فریشتە مەسئوولی دابەزاندنی وەحییە؟",
        options: ["میکائیل", "جبرائیل", "ئیسرافیل", "عەزرائیل"],
        correct: 1,
        explanation: "جبرائیل فریشتەی وەحییە و مەسئوولی دابەزاندنی پەیامی خودایە بۆ پێغەمبەران."
    },
    {
        question: "کام پێغەمبەر تەمەنی زۆر درێژ بوو؟",
        options: ["ئادەم", "نوح", "ئیبراهیم", "موسا"],
        correct: 1,
        explanation: "نوح پێغەمبەر ٩٥٠ ساڵ گەلەکەی بانگ کرد بۆ ئیمان هێنان."
    },
    {
        question: "کام مانگ دوای ڕەمەزان دێت؟",
        options: ["شەعبان", "شەوال", "ڕەجەب", "موحەڕەم"],
        correct: 1,
        explanation: "شەوال دەیەم مانگی ڕۆژژمێری ئیسلامییە و دوای ڕەمەزان دێت. جەژنی ڕەمەزان لە یەکەم ڕۆژی شەوالە."
    }
];

// 2. Ramadan Information (Professional Redesign)
const ramadanInfo = [
    {
        id: 1,
        title: "واتای وشەی 'ڕەمەزان'",
        subtitle: "ڕیشە و مێژوو",
        content: "ڕەمەزان نۆیەم مانگی ساڵنامەی کۆچییە. ناوی ڕەمەزان لە وشەی 'ڕەمەد'ـەوە هاتووە کە بە واتای گەرمای توند یان وشکبوونی زەوی دێت بەهۆی تیشکی خۆرەوە. ئەمەش ئاماژەیە بۆ ئەو هەستەی کە تینوێتی و پەرۆشی لە دڵی ڕۆژووەواندا دروست دەکات. لە ڕووی مەعنەوییەوە، ڕەمەزان گوناهەکان دەسوتێنێت و پاکیان دەکاتەوە وەک چۆن خۆر زەوی پاک دەکاتەوە. ئەم ناوە هانت دەدات بیر لەوە بکەیتەوە کە چۆن گەرما و تینوێتی پاکت دەکەنەوە لە ڕووی ڕۆحییەوە. مێژووی ئەم مانگە دەگەڕێتەوە بۆ سەردەمی بانگەواز، کە تێیدا فەرزکراوە لە ساڵی دووەمی کۆچیدا.",
        icon: <Moon size={32} />,
        color: "#10b981",
        points: ["نۆیەم مانگی کۆچی", "سوتێنەری گوناهەکان", "ساڵی ٢ی کۆچی فەرزکرا"]
    },
    {
        id: 2,
        title: "فەزڵ و گرنگی مانگەکە",
        subtitle: "کاتە زێڕینەکان",
        content: "ئەم مانگە مانگی دابەزینی قورئانی پیرۆزە. تێیدا شەوێک هەیە بە ناوی 'شەوی قەدر' کە لە هەزار مانگ خێرتر و چاکترە. دەرگاکانی بەهەشت دەکرێنەوە و دەرگاکانی دۆزەخ دادەخرێن، و شەیتانەکان کۆت و زنجیر دەکرێن. ئەمە هەلێکی دەگمەنە بۆ گۆڕانکاری ڕاستەقینە لە ژیانی هەر تاکێکدا. پێغەمبەر (د.خ) دەفەرموێت: هەرکەسێک ڕەمەزان بە دەست بێنی و لێی خۆش نەبن، ئەوە پەرش و بڵاو بووە. بۆیە ئەمە مانگی لێخۆشبوون و ڕەحمەتە.",
        icon: <Sparkles size={32} />,
        color: "#f59e0b",
        points: ["دابەزینی قورئان", "شەوی قەدر", "کۆتکردنی شەیتانەکان"]
    },
    {
        id: 3,
        title: "سودە تەندروستییەکانی ڕۆژوو",
        subtitle: "تەندروستی جەستە و دەروون",
        content: "ڕۆژوو گرتن تەنها پەرستش نییە، بەڵکو سودێکی زۆری بۆ جەستە هەیە. یارمەتی دابەزاندنی کێش و کەمکردنەوەی چەوری دەدات. هەروەها دەبێتە هۆی پاکبوونەوەی جەستە لە ژەهرەکان و پشوودان بە کۆئەندامی هەرس بۆ ماوەی چەندین کاتژمێر. توێژینەوە نوێیەکان دەریانخستووە کە ڕۆژوو دەبێتە هۆی نوێبوونەوەی خانەکانی جەستە و بەهێزبوونی بەرگری. لە ڕووی دەروونییەوە، ئارامی و سەقامگیری بە دڵ و مێشک دەبەخشێت و تەرکیز لەسەر ئامانجە مەزنەکان زیاد دەکات.",
        icon: <Info size={32} />,
        color: "#3b82f6",
        points: ["پاککردنەوەی ژەهرەکان", "نوێبوونەوەی خانەکان", "چالاککردنی مێشک"]
    },
    {
        id: 4,
        title: "قیامی شەو و تەراویح",
        subtitle: "ڕازاندنەوەی شەوان",
        content: "نوێژی تەراویح سوونەتێکی جێگیرە لە شەوانی ڕەمەزاندا. ئەم نوێژە بە کۆمەڵ ئەنجام دەدرێت و دەبێتە هۆی بەهێزبوونی پەیوەندی نێوان بڕواداران. جگە لە تەراویح، دە شەوی کۆتایی نوێژی قیام و زیکر تێیدا دەگاتە ئەوپەڕی. قیام ڕێگەیەکە بۆ نزیکبوونەوە لە خودا لەو کاتانەی کە خەڵک خەوتوون. موسڵمانان لەم نوێژانەدا پارچە گەورەکانی قورئان دەخوێنن و بیر لە مانا قوڵەکانی دەکەنەوە.",
        icon: <Star size={32} />,
        color: "#8b5cf6",
        points: ["نوێژی تەراویح", "قیامی شەو", "ئیعتیکاف و دوعا"]
    },
    {
        id: 5,
        title: "زەکاتی سەرفترە",
        subtitle: "خزمەتی کۆمەڵایەتی",
        content: "سەرفترە فەرزە لەسەر هەموو موسڵمانێک پێش نوێژی جەژن. ئامانجی ئەم زەکاتە پاککردنەوەی ڕۆژووە لە هەر کەموکوڕییەک و هەروەها دڵخۆشکردنی هەژارانە لە ڕۆژی جەژندا. بڕەکەی دیاریکراوە بەپێی خواردنی سەرەکی وڵات (وەک گەنم یان برنج). ئەمە وانەی بەخشین و هاوسۆزی فێری بڕواداران دەکات، کە نابێت لە کاتی خۆشیدا کەسانی هەژار فەرامۆش بکرێن.",
        icon: <Award size={32} />,
        color: "#ef4444",
        points: ["پاککردنەوەی ڕۆژوو", "دڵخۆشکردنی هەژاران", "پێش نوێژی جەژن"]
    },
    {
        id: 6,
        title: "ئیعتیکاف و گۆشەگیری",
        subtitle: "بۆ خودا گەڕانەوە",
        content: "ئیعتیکاف بریتییە لە مانەوە لە مزگەوت لە دە شەوی کۆتایی ڕەمەزاندا بە مەبەستی پەرستش. ئەمە سوونەتێکی گەورەی پێغەمبەرە (د.خ). لەم کاتەدا بڕوادار لە هەموو سەرقاڵییەکانی دنیا دوور دەکەوێتەوە و تەنها تەرکیز دەکاتە سەر نوێژ، دوعا، و خوێندنەوەی قورئان. ئەمە باشترین کاتە بۆ دۆزینەوەی شەوی قەدر و بەدەستهێنانی پاداشتە مەزنەکان.",
        icon: <Bookmark size={32} />,
        color: "#ec4899",
        points: ["دە شەوی کۆتایی", "دوورکەوتنەوە لە دنیا", "دۆزینەوەی شەوی قەدر"]
    },
    {
        id: 7,
        title: "خوێندنەوەی قورئان",
        subtitle: "بەهاری دڵەکان",
        content: "ڕەمەزان مانگی قورئانە. بڕواداران هەوڵ دەدەن لانی کەم جارێک قورئان خەتم بکەن لەم مانگەدا. خوێندنەوەی قورئان تەنها دەربڕینی وشەکان نییە، بەڵکو تێڕامانە لە مانا و حوکمەکانی. هەر پیتێکی قورئان لەم مانگەدا پاداشتی چەند نهێنی هەیە. زۆرێک لە زانایان لەم مانگەدا هەموو کارێکی تریان وەستاندووە تەنها بۆ خوێندنەوەی قورئان، چونکە ئەمە باشترین هاوەڵە بۆ ڕۆژووەوان.",
        icon: <Book size={32} />,
        color: "#06b6d4",
        points: ["خەتمکردنی قورئان", "تێڕامان لە ماناکان", "پاداشتی دە قات"]
    },
    {
        id: 8,
        title: "بەخشین و سەدەقە",
        subtitle: "دەستی میهرەبانی",
        content: "بەخشین لە ڕەمەزاندا پاداشتێکی بێ وێنەی هەیە. پێغەمبەر (د.خ) لە ڕەمەزاندا لە هەموو کاتێک زیاتر بەخشندە بووە، تەنانەت وەک بایەکی خێرا وابووە لە بەخشیندا. سەدەقە تەنها پارە نییە، بەڵکو پێدانی بەربانگ بە ڕۆژووەوانێک یان یارمەتیدانی کەسێکی لێقەوماویش دەگرێتەوە. ئەمە دڵەکان لە ڕەزیلی پاک دەکاتەوە و بەرەکت دەخاتە ناو ماڵ و سەروەت و سامان.",
        icon: <Heart size={32} />,
        color: "#f43f5e",
        points: ["وەک بای باران", "بەربانگدان بە خەڵک", "پاککردنەوەی دڵ"]
    }
];


// 3. Prophet Stories (Expanded and Detailed)
const prophetStories = [
    {
        id: 'adam',
        title: "پێغەمبەر ئادەم (س.خ)",
        content: "ئادەم یەکەم مرۆڤ و یەکەم پێغەمبەر بوو کە خودا دروستی کرد. خودای گەورە پاش جۆرەها باس و خواس لەگەڵ فریشتەکان، ئادەمی لە قوڕ دروست کرد و دواتر ڕۆحی پێدا و فەرمانی بە فریشتەکان کرد کڕنووشی بۆ ببەن. هەمووان کڕنووشیان برد جگە لە ئیبلیس کە خۆی بە گەورەتر زانی. ئادەم و حەوا لە بەهەشتدا نیشتەجێ بوون، لەوێ هەموو شتێکیان بۆ حەڵاڵ بوو جگە لە دارێکی دیاریکراو. بەڵام بەهۆی فێڵی شەیتان و سوێندخواردنی درۆیەوە، ئادەم و حەوا لەو دارەیان خوارد. خودا ناردنی بۆ سەر زەوی بۆ ئەوەی ببێتە سەرپەرشتیاری زەوی. ئادەم لەسەر زەوی بۆ ماوەیەکی زۆر گریای و داوای لێخۆشبوونی کرد، تا خودا تۆبەکەی وەرگرت. ئادەم باوکی هەموو مرۆڤایەتییە و فێری کردین کە هەڵە مرۆییە، بەڵام گەڕانەوە بۆ لای خودا نیشانەی گەورەییە. ئەو یەکەم کەس بوو کە کشتوکاڵی کرد و یەکەم زمان و زانستی پێ درا.",
        lessons: [
            "خۆبەگەورەزانین (کبر) مرۆڤ بەرەو تیاچوون و دوورکەوتنەوە لە خودا دەبات.",
            "داوای لێخۆشبوون و تۆبە دەرگای ڕەحمەتی خودا دەکاتەوە تەنانەت دوای هەڵە گەورەکانیش.",
            "شەیتان دوژمنێکی وریایە و هەمیشە هەوڵ دەدات لە ڕێگەی دەستکەوتە دنیاییەکانەوە فێڵمان لێ بکات.",
            "متمانە بە خودا و داننان بە هەڵە بنەمای ژیانی بڕوادارە."
        ],
        icon: "🌱"
    },
    {
        id: 'idris',
        title: "پێغەمبەر ئیدریس (س.خ)",
        content: "ئیدریس یەکەم کەس بوو کە پاش ئادەم و شیس بانگەوازی بۆ یەکتاپەرستی کرد. ئەو بەوە ناسرابوو کە یەکەم کەس بووە بە پێنووس (قەڵەم) نووسیویەتی و فێری زانست و ئەستێرەناسی بووە. هەروەها یەکەم کەس بووە کە جلی دووریوە، چونکە پێش ئەو خەڵک پێستی ئاژەڵیان دەپۆشی. ئیدریس زۆر پابەند بوو بە پەرستنی خوداوە و ڕۆژانە هێندەی هەموو خەڵکی سەردەمی خۆی پاداشتی بۆ دەنووسرا. خودا پلەیەکی بەرزی پێ بەخشی و لە قورئاندا بە 'بەرزکراوە' ناوی دەبات. ئەو نموونەیەکە بۆ تێکەڵکردنی زانستی دونیا و پەرستنی خودا، نیشانی داین کە فێربوون و داهێنان بەشێکن لە ئیمان.",
        lessons: [
            "زانست و خوێندنەوە و نووسین لە ئیسلامدا پلەیەکی زۆر بەرزیان هەیە.",
            "داهێنان لە کار و پیشەدا دەکرێت ببێتە هۆی نزیکبوونەوە لە خودا.",
            "ڕۆژوو و پەرستنی بەردەوام مرۆڤ بۆ پلە بەرزەکان دەبات.",
            "پابەندبوون بە ڕاستگۆیی و دادپەروەری نیشانەی پێغەمبەرانە."
        ],
        icon: "🖋️"
    },
    {
        id: 'nuh',
        title: "پێغەمبەر نوح (س.خ)",
        content: "نوح بۆ ماوەی ٩٥٠ ساڵ بە شەو و بە ڕۆژ، بە نهێنی و بە ئاشکرا گەلەکەی بانگ کرد بۆ لای خودا و پەرستنی خودای تاق و تەنها. گەلەکەی گاڵتەیان پێ دەکرد، پەنجەیان دەخستە گوێیان تا دەنگی نەبیستن و جلیان بەسەر سەری خۆیاندا دەدا. کاتێک بێئومێد بوو لە چاکبوونیان، خودا فەرمانی پێکرد کەشتییەکی گەورە دروست بکات. خەڵک لە تەنیشتیەوە تێدەپەڕین و پێیان وا بوو شێت بووە چونکە لە وشکانی و سەحرایەکی بێ ئاودا کەشتی دروست دەکات. کاتێک لافاوە گەورەکە دەستیپێکرد، زەوی تەقییەوە و لە ئاسمانەوە بارانێکی بێوێنە باری. نوح بانگی کوڕەکەی کرد کە بێتە ناو کەشتییەکە، بەڵام کوڕەکەی وتی پەنا دەبەم بۆ شاخێک، بەڵام هیچ شاخێک لە لافاوی خودا ڕزگاری نەبوو. تەنها ئەوانەی لە کەشتییەکەدا بوون ڕزگاریان بوو. ئەمە وانەیەکە کە تەنها ئیمان مرۆڤ ڕزگار دەکات، نەک پلە و پۆست و خزمایەتی.",
        lessons: [
            "ئارامگرتن لەسەر بانگەواز پاداشتەکەی گەورەیە و پێویستی بە کاتێکی زۆرە.",
            "پەیوەندی خوێن و خێزان بەبێ ئیمان مرۆڤ ڕزگار ناکات لە سزای خودا.",
            "سەرزەنشت و گاڵتەی خەڵک نابێت بمانوەستێنێت لە ئەنجامدانی کارە چاکەکان و فەرمانەکان.",
            "یەکتاپەرستی بنەمای ڕزگاربوونی هەموو مرۆڤایەتییە لە هەموو سەردەمەکاندا."
        ],
        icon: "🚢"
    },
    {
        id: 'ibrahim',
        title: "پێغەمبەر ئیبراهیم (س.خ)",
        content: "ئیبراهیم ناسراوە بە 'خەلیلوڵڵا' (خۆشەویستی خودا) و باوکی پێغەمبەران. ئەو لە قۆناغێکی گەنجیدا بە عەقڵی خۆی بەدوای خودادا گەڕا و دژی بتپەرستی باوکی و گەلەکەی وەستایەوە. هەموو بتەکانی شکاند و تەنها گەورەکەیانی هێشتەوە تا بیسەلمێنێت کە ئەوان توانای بەرگری لە خۆشیان نییە. کاتێک نمرودی ستەمکار ویستی لەناو ئاگرێکی یەکجار گەورەدا بیسوتێنێت، ئیبراهیم هیچ نەترسا و تەنها وتی 'حسبنا الله ونعم الوکیل'. خودا ئاگرەکەی کردە سارد و سەلامەت. دواتر فەرمانی پێکرا هاوسەرەکەی (هاجەر) و کوڕە ساواکەی (ئیسماعیل) لە بیابانێکی چۆڵدا جێبهێڵێت، لەوێ ئاوی زەمزەم تەقییەوە. گەورەترین تاقیکردنەوەی فەرمانی سەربڕینی ئیسماعیل بوو، کە تێیدا سەرکەوتوو بوو و خودا قۆچێکی بۆ نارد. ئیبراهیم کەعبەی پیرۆزی دروست کرد و بوو بە پێشەوای هەموو یەکتاپەرستان.",
        lessons: [
            "پشت بەستن بە خودا (توکل) لە کاتە هەرە ناخۆش و ترسناکەکاندا.",
            "ملکەچبوون بۆ فەرمانەکانی خودا بەبێ هیچ دوودڵی و پرسیارێک.",
            "بیرکردنەوە لە گەردوون (خۆرا و مانگ و ئەستێرەکان) بۆ گەیشتن بە ناسینی خودا.",
            "قوربانیکردن بە خۆشەویستترین شتەکان لە پێناو ڕەزامەندی پەروەردگاردا."
        ],
        icon: "🔥"
    },
    {
        id: 'ayyub',
        title: "پێغەمبەر ئەییووب (س.خ)",
        content: "ئەییووب نموونەی هەرە بەرز و مەزنی ئارامگرتنە لە مێژوودا. ئەو پیاوێکی یەکجار دەوڵەمەند بوو، منداڵی زۆر و زەوی و زاری زۆری هەبوو، بەڵام خودا تاقیکردەوە. هەموو سەروەتەکەی لەدەستدا، هەموو منداڵەکانی گیانیان سپارد، و خۆشی تووشی نەخۆشییەکی پێست بوو کە ساڵانێکی زۆر کێشا. خەڵک لێی دوورکەوتنەوە جگە لە هاوسەرە وەفادارەکەی. سەرەڕای ئەم هەموو ئازارە، ئەییووب هەرگیز سکاڵای نەکرد و بەردەوام سوپاسی خودای دەکرد. دوای ١٨ ساڵ پشوو درێژی، بە دەنگێکی نزم دوعای کرد: 'پەروەردگارم من زیانم پێ گەیشتووە و تۆش بەخشندەترینی'. خودا فەرمانی پێکرد پێی بدات لە زەوی و ئاوێکی لێ دەرچوو کە هەموو نەخۆشییەکانی چاک کردەوە و دوو ئەوەندەی پێشوو سەروەت و منداڵی پێ بەخشییەوە.",
        lessons: [
            "ئارامگرتن لە کاتی نەخۆشی و ناخۆشیدا پلەی مرۆڤ بەرز دەکاتەوە.",
            "نیعمەتەکان (پارە و منداڵ) تاقیکردنەوەن و دەشێ لە هەر کاتێکدا نەمێنن.",
            "وەفاداری هاوسەر لە کاتە ناخۆشەکاندا نیشانەی گەورەیی و عەشقێکی ڕاستەقینەیە.",
            "خودا هەمیشە لەگەڵ ئەو کەسانەیە کە ئارام دەگرن و پاداشتیان دەداتەوە."
        ],
        icon: "🩹"
    },
    {
        id: 'yosef',
        title: "پێغەمبەر یوسف (س.خ)",
        content: "چیرۆکی یوسف جوانترین و پڕ وانەترین چیرۆکی قورئانە. ئەو کوڕێکی زۆر جوان و خۆشەویستی باوکی بوو (یەعقوب)، ئەمەش وایکرد براکانی حەسودی پێ ببەن و بیخەنە ناو بیرێکی قوڵەوە. پاشان وەک کۆیلەیەکی هەرزان بە کاروانێک فرۆشرا و گەیشتە میسر. لەوێ لە ماڵی گەورەی میسر گەورە بوو، بەڵام تاقیکردنەوەی ئافرەتی بۆ هات و چونکە ڕەتی کردەوە، خرایە زیندان. لە زینداندا بۆ ماوەی چەندین ساڵ مایەوە و خەریکی بانگەواز بوو. بەهۆی لێکدانەوەی خەونێک بۆ پادشا، ڕزگاری بوو و کرا بە بەرپرسی هەموو گەنجینەکانی میسر. کاتێک وشکەساڵی هات، براکانی ناسییەوە و نەک هەر تۆڵەی لێ نەکردنەوە، بەڵکو لێیان خۆش بوو و هەموو خێزانەکەی لە میسر کۆکردەوە. یوسف نیشانی داین کە چۆن پاکی و دەمانەت مرۆڤ لە ژێر بیرەوە بۆ سەر کورسی پادشایەتی دەبات.",
        lessons: [
            "حەسودی دەکاتە هۆی هەڵوەشاندنەوەی پەیوەندییە خێزانییەکان و دەبێت وریای بین.",
            "پاش هەموو ناخۆشییەک و زیندانییەک، دەرفەت و خۆشییەکی گەورە چاوەڕوانی مرۆڤ دەکات.",
            "پێداگری لەسەر ڕەوشت و پاکی لە کاتی بوونی فیتنە و گوناهدا.",
            "لێخۆشبوون لە کاتی هەبوونی دەسەڵاتی تەواودا نیشانەی ئەوپەڕی گەورەیی و ئیمانە."
        ],
        icon: "✨"
    },
    {
        id: 'musa',
        title: "پێغەمبەر موسا (س.خ)",
        content: "موسا 'کەلیمەڵڵا'یە، ئەوەی خودا ڕاستەوخۆ قسەی لەگەڵ کرد. ئەو لە سەردەمێکدا لەدایک بوو کە فیرعەون منداڵی کوڕی دەسەربڕی، بەڵام خودا پاراستی و لەناو ماڵی فیرعەوندا گەورە بوو. پاش ئەوەی بە هەڵە پیاوێکی کوشت، بۆ مەدیەن ڕایکرد و دواتر لە ڕێگەی گەڕانەوەیدا وەحی بۆ هات. گەورەترین ئەرکی ڕووبەڕووبوونەوەی فیرعەون بوو بۆ ڕزگارکردنی بەنی ئیسرائیل. موسا بە گۆچانەکەی دەیان پەرجووی نیشان دا، وەک شەقکردنی دەریا کاتێک فیرعەون و سوپاکەی دوایان کەوتبوون. دەریاکە بوو بە دوو بەش و ڕێگەی دا موسا و گەلەکەی تێپەڕ بن، پاشان هاتەوە یەک و فیرعەونی تێدا خنکا. موسا پێشەوایەکی ئازا و بەجەرگ بوو کە یاسا و شەریعەتی (تەورات) بۆ گەلەکەی هێنا و ساڵانێکی زۆر لە بیابان لەگەڵیان ئارامی گرت.",
        lessons: [
            "هەق هەمیشە بەسەر باطلدا سەردەکەوێت هەرچەند بە باطل و ستەمکاریش زۆر و بەهێز بن.",
            "ئازایەتی لە گەیاندنی پەیامی ڕاستی بەرامبەر گەورەترین دیکتاتۆرەکان.",
            "پەرجووی خودا هەمیشە پشتگیری ئەو کەسانە دەکات کە بەڕاستی کاری بۆ دەکەن.",
            "ئارامگرتن لە مامەڵەکردن لەگەڵ گەلی سەخت و کەللەڕەق پێویستی بە حیكمەت و هێز هەیە."
        ],
        icon: "🌊"
    },
    {
        id: 'sulayman',
        title: "پێغەمبەر سولەیمان (س.خ)",
        content: "سولەیمان کوڕی داود بوو، خودا پادشایەتییەکی بێ وێنەی پێ بەخشیبوو. ئەو دەیتوانی قسە لەگەڵ هەموو گیاندارەکان (باڵندە، مێروو، ئاژەڵ)دا بکات و دەنگی مێروولەکانی دەبیست. هەروەها جنۆکەکان و باکان لە بن دەسەڵاتی ئەودا بوون و بە فەرمانی ئەو کارەکردن. سەرەڕای ئەو هەموو هێز و سەروەت و سامانی زێر و زیوە، سولەیمان پارچە نانێکی جۆی دەخوارد و زۆربەی شەوەکانی بە پەرستن بەسەر دەبرد. ئەو زۆر دادپەروەر بوو و هەمیشە حوکمی خوا بەسەر خەڵکدا دەگێڕا. چیرۆکی ناردنی کێشەکە بۆ شاژنی سەبا و هێنانی تەختی پادشایەتییەکەی لە چاوتروکانێکدا، نیشانەی ئەو هێزە مەزنەیە کە خودا بەو کەسانەی دەبەخشێت کە سوپاسگوزارن.",
        lessons: [
            "دەسەڵات و سەروەت و سامان نابێت مرۆڤ لە خودا و خزمەتی خەڵک دوور بخاتەوە.",
            "سوپاسگوزاری (شکر) نیعمەتەکان جێگیر دەکات و بەرەکەت زیاد دەکات.",
            "دادپەروەری بنەمای هەر دەسەڵاتێکی ڕاستەقینە و بەردەوامە لە مێژوودا.",
            "زانست و تێگەیشتن لە زمان و سروشت دیارییەکی خودایە بۆ بەندە نێزیکەکانی."
        ],
        icon: "👑"
    },
    {
        id: 'isa',
        title: "پێغەمبەر عیسا (س.خ)",
        content: "عیسا کوڕی مریەم بەبێ باوک و بە فەرمانی خودا (کن فیکون) لەدایک بوو. ئەو لە بێشکەدا و کاتێک ساوا بوو قسەی کرد تا بێتاوانی دایکی بسەلمێنێت. خودا (ئینجیل)ی بۆ نارد و کۆمەڵێک پەرجووی مەزنی پێ بەخشی، وەک چاککردنەوەی کوێر و گەڕاندنەوەی ڕۆح بۆ مردووەکان بە ئیزنی خودا. عیسا بانگەوازی بۆ خۆشەویستی، بەزەیی، و پاککردنەوەی دڵ دەکرد. کاتێک جولەکەکان ویستیان بیکوژن و لە خاچی بدەن، خودا ڕزگاری کرد و بەرەو ئاسمانی برد و کەسێکی تری لێ شوبهاندن. ئەو یەکێکە لەو پێغەمبەرانەی کە لە کۆتایی زەماندا دەگەڕێتەوە بۆ سەر زەوی تا دادپەروەری پەیڕەو بکات و ڕاستی بۆ هەموو جیهان ئاشکرا بکات.",
        lessons: [
            "توانای خودا بێ سنوورە و دەتوانێت شتی مەحاڵ ئەنجام بدات (لەدایکبوونی عیسا).",
            "ئاینی ڕاستەقینە بریتییە لە پاککردنەوەی ناخ و بەزەیی بەرامبەر هەموو مەخلوقات.",
            "دایباب پلەیەکی بەرزیان هەیە و بەرگری لێکردنیان ئەرکێکی پیرۆزە.",
            "ژیان تەنها ئەم دنیایە نییە و خودا پارێزەری بەندە دڵسۆزەکانییەتی."
        ],
        icon: "✨"
    },
    {
        id: 'younis',
        title: "پێغەمبەر یونس (س.خ)",
        content: "یونس (ساحات الحوت) کاتێک بێئومێد بوو لەوەی گەلەکەی ئیمان بێنن، بەبێ مۆڵەتی خودا پشتی تێکردن و سواری کەشتییەک بوو. لە دەریایەکی پڕ لە شەپۆلدا, بە تیروپشک بڕیاردرا فڕێ بدرێتە ناو دەریاوە تا کەشتییەکە سوک بێت. ماسییەکی یەکجار گەورە قووتی دا. لە ناو سکی ماسییەکەدا و لە تاریکییەکی چڕدا، یونس نەکەوتە ناو نائومێدی جەرگبڕ، بەڵکو دەستی کرد بە زیکر و تەزبیحکردن: 'لا إله إلا أنت سبحانك إني كنت من الظالمين'. خودا گوێبیستی نزاكەی بوو و فەرمانی بە ماسییەکە کرد لە کەنارێکدا فڕێی بدات. پاش چاکبوونەوەی، بینی هەموو گەلەکەی (١٠٠ هەزار کەس) ئیمانیان هێناوە. ئەمە گەورەترین وانەیە کە هەرگیز نابێت مرۆڤ لە کارەکەی بێزار بێت و هەمیشە دەرگای خودا کراوەیە.",
        lessons: [
            "دوعا و زیکر کلیلی ڕزگاربوونن لە هەرە ناخۆشترین و تەنگترین بارودۆخەکاندا.",
            "هەرگیز نابێت لە ڕەحمەت و گۆڕانی بارودۆخ بێئومێد بین، تەنانەت لە ناو سکی ماسییەکیشدا.",
            "پێویستە هەمیشە متمانەمان بەوە هەبێت کە خودا لە هەموو کەس زیاتر تواناترە.",
            "دانان بە هەڵەدا و گەڕانەوە بردن بۆ لای پەروەردگار گەورەترین ئەرکی مرۆڤە."
        ],
        icon: "🐋"
    },
    {
        id: 'mohammad',
        title: "پێغەمبەر موحەممەد (د.خ)",
        content: "موحەممەد کوڕی عەبدوڵڵا، کۆتا پێغەمبەر و ڕەحمەتێکە بۆ هەموو جیهانیان. ئەو لە یەتیمیدا گەورە بوو بەڵام بەهۆی ڕەوشتە بەرزەکەیەوە بە 'ئەمین' دەناسرا. لە ئەشكەوتی حیڕا یەکەم پەیامی (خوێندنەوە) بۆ هات. بۆ ماوەی ٢٣ ساڵ، لە مەکە و مەدینە، بە ئارامگرتنێکی بێوێنە و جیهادێکی مەزن، توانی قورئان بگەێنێت و دڵی مرۆڤەکان ببات، نەک بە شمشێر بەڵکو بە جوانی ڕەفتارەکانی. ئەو نموونەی باوک، سەرکردە، هاوسەر، و هاوڕێیەکی کامڵ بوو. لە فەتحی مەکەدا، کەسانێک کە ساڵانێکی زۆر ئازاریان دابوو، پێی وتن 'بڕۆن ئێوە ئازادن'. ئەمە لووتکەی مرۆڤایەتی بوو. موحەممەد (د.خ) ڕێگەی ژیانی بۆ هەموو نەوەکان ڕوون کردەوە و هێشتا وەک ڕووناکییەک ڕێگەی ملیۆنان مرۆڤ ڕووناک دەکاتەوە.",
        lessons: [
            "ڕەوشتی بەرز (اخلاق) گەورەترین و باشترین هۆکارە بۆ بڵاوبوونەوەی ئایینی ڕاستەقینە.",
            "دەستپاکی و ڕاستگۆیی بنەمای هەرە سەرەکی کەسایەتی یەک موسڵمانی ڕاستەقینەیە.",
            "خۆشویستنی پێغەمبەر و کردنی بە پێشەوا لە هەموو کایەکانی ژیاندا (خێزانی، کار، و پەرستش).",
            "ئارامگرتن لە کاتی بوونی ناخۆشییەکان نیشانەی متمانەی تەواوە بە پەروەردگاری جیهانیان."
        ],
        icon: "🕌"
    }
];

const ImanQuest = ({ t, language }) => {
    const [gameState, setGameState] = useState('start'); // start, playing, finished
    const [gameMode, setGameMode] = useState(null); // quiz, ramadan, prophets
    const [currentStage, setCurrentStage] = useState(0);
    const [score, setScore] = useState(0);
    const [selectedOption, setSelectedOption] = useState(null);
    const [showExplanation, setShowExplanation] = useState(false);

    // State for Prophet Stories list navigation
    const [selectedProphetIndex, setSelectedProphetIndex] = useState(0);

    const startGame = (mode) => {
        setGameMode(mode);
        setGameState('playing');
        setCurrentStage(0);
        setScore(0);
        setSelectedOption(null);
        setShowExplanation(false);
        setSelectedProphetIndex(0);
    };

    const handleAnswer = (index) => {
        if (showExplanation || gameMode !== 'quiz') return;

        setSelectedOption(index);
        if (index === quizQuestions[currentStage].correct) {
            setScore(score + 10);
        }
        setShowExplanation(true);
    };

    const nextQuizQuestion = () => {
        if (currentStage < quizQuestions.length - 1) {
            setCurrentStage(currentStage + 1);
            setSelectedOption(null);
            setShowExplanation(false);
        } else {
            setGameState('finished');
        }
    };

    const nextRamadanInfo = () => {
        if (currentStage < ramadanInfo.length - 1) {
            setCurrentStage(currentStage + 1);
        } else {
            setGameState('finished');
        }
    };

    const resetGame = () => {
        setGameState('start');
        setGameMode(null);
        setCurrentStage(0);
        setScore(0);
        setSelectedOption(null);
        setShowExplanation(false);
    };

    const direction = language === 'ku' ? 'rtl' : 'ltr';

    return (
        <section id="game" className="container" style={{ padding: '6rem 0', direction }}>
            <div style={{ textAlign: 'center', marginBottom: '4rem' }}>
                <h2 style={{ fontSize: '3.5rem', fontWeight: '900', marginBottom: '1rem', fontFamily: 'var(--font-display)' }}>گەشتی ئیمان</h2>
                <p style={{ color: 'var(--text-dim)', fontSize: '1.2rem' }}>زانیارییەکانت بەهێز بکە لەڕێگەی ئەم گەشتە ڕۆحییەوە.</p>
            </div>

            <div className="glass" style={{
                maxWidth: gameMode === 'prophets' ? '1100px' : '900px',
                margin: '0 auto',
                padding: gameMode === 'prophets' ? '0' : '3.5rem',
                minHeight: '650px',
                display: 'flex',
                flexDirection: 'column',
                justifyContent: gameState === 'start' ? 'center' : 'flex-start',
                position: 'relative',
                overflow: 'hidden',
                borderRadius: '40px',
                border: '1px solid rgba(255, 255, 255, 0.05)'
            }}>
                {/* Animated Background Glow */}
                <div style={{
                    position: 'absolute',
                    top: '-50%',
                    left: '-50%',
                    width: '200%',
                    height: '200%',
                    background: 'radial-gradient(circle, rgba(212, 175, 55, 0.03) 0%, transparent 60%)',
                    zIndex: 0,
                    pointerEvents: 'none'
                }} />

                <div style={{ position: 'relative', zIndex: 1, width: '100%', height: '100%' }}>
                    <AnimatePresence mode="wait">
                        {gameState === 'start' && (
                            <motion.div
                                key="start"
                                initial={{ opacity: 0, scale: 0.95 }}
                                animate={{ opacity: 1, scale: 1 }}
                                exit={{ opacity: 0, scale: 1.05 }}
                                style={{ textAlign: 'center' }}
                            >
                                <motion.div
                                    animate={{ y: [0, -10, 0] }}
                                    transition={{ duration: 4, repeat: Infinity }}
                                >
                                    <Award size={85} color="var(--primary)" style={{ marginBottom: '2.5rem', filter: 'drop-shadow(0 0 15px var(--primary-glow))' }} />
                                </motion.div>
                                <h3 style={{ fontSize: '2.5rem', fontWeight: '800', marginBottom: '1rem', color: 'white' }}>ئامادەیت بۆ گەشتەکە؟</h3>
                                <p style={{ color: 'var(--text-dim)', fontSize: '1.1rem', marginBottom: '3.5rem', maxWidth: '500px', margin: '0 auto 3.5rem' }}>
                                    یەکێک لەم پۆلانەی خوارەوە هەڵبژێرە بۆ دەستپێکردنی گەشتە مەعریفییەکەت.
                                </p>

                                <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fit, minmax(250px, 1fr))', gap: '2rem', marginTop: '2rem' }}>
                                    {/* Left: Prophet Stories */}
                                    <motion.button
                                        whileHover={{ y: -10, scale: 1.02 }}
                                        whileTap={{ scale: 0.98 }}
                                        onClick={() => startGame('prophets')}
                                        style={{
                                            padding: '2.5rem',
                                            borderRadius: '30px',
                                            background: 'linear-gradient(135deg, rgba(139, 92, 246, 0.15) 0%, rgba(139, 92, 246, 0.05) 100%)',
                                            border: '1px solid rgba(139, 92, 246, 0.3)',
                                            cursor: 'pointer',
                                            display: 'flex',
                                            flexDirection: 'column',
                                            alignItems: 'center',
                                            gap: '1.5rem',
                                            boxShadow: '0 15px 35px rgba(139, 92, 246, 0.1)'
                                        }}
                                    >
                                        <div style={{ background: 'rgba(139, 92, 246, 0.2)', padding: '1rem', borderRadius: '20px' }}>
                                            <Sparkles size={45} color="#a78bfa" />
                                        </div>
                                        <div style={{ textAlign: 'center' }}>
                                            <span style={{ color: 'white', fontSize: '1.4rem', fontWeight: '800', display: 'block', marginBottom: '0.4rem' }}>چیرۆکی پێغەمبەران</span>
                                            <span style={{ color: 'rgba(255,255,255,0.5)', fontSize: '0.95rem' }}>خوێندنەوەی چیرۆک و وانەکان</span>
                                        </div>
                                    </motion.button>

                                    {/* Middle: Ramadan Information (Redesigned) */}
                                    <motion.button
                                        whileHover={{ y: -10, scale: 1.02 }}
                                        whileTap={{ scale: 0.98 }}
                                        onClick={() => startGame('ramadan')}
                                        style={{
                                            padding: '2.5rem',
                                            borderRadius: '30px',
                                            background: 'linear-gradient(135deg, rgba(16, 185, 129, 0.15) 0%, rgba(16, 185, 129, 0.05) 100%)',
                                            border: '1px solid rgba(16, 185, 129, 0.4)',
                                            cursor: 'pointer',
                                            display: 'flex',
                                            flexDirection: 'column',
                                            alignItems: 'center',
                                            gap: '1.5rem',
                                            boxShadow: '0 15px 35px rgba(16, 185, 129, 0.1)',
                                            position: 'relative',
                                            overflow: 'hidden'
                                        }}
                                    >
                                        <div style={{ background: 'rgba(16, 185, 129, 0.2)', padding: '1rem', borderRadius: '20px' }}>
                                            <Moon size={45} color="#34d399" />
                                        </div>
                                        <div style={{ textAlign: 'center' }}>
                                            <span style={{ color: 'white', fontSize: '1.4rem', fontWeight: '800', display: 'block', marginBottom: '0.4rem' }}>زانیاری ڕەمەزان</span>
                                            <span style={{ color: 'rgba(255,255,255,0.5)', fontSize: '0.95rem' }}>هەمەجۆر و فێربوونی ورد</span>
                                        </div>
                                        <div style={{ position: 'absolute', top: '10px', right: '10px', background: 'rgba(16, 185, 129, 0.3)', color: '#34d399', fontSize: '0.7rem', padding: '4px 8px', borderRadius: '10px', fontWeight: 'bold' }}>PRO</div>
                                    </motion.button>

                                    {/* Right: Q&A */}
                                    <motion.button
                                        whileHover={{ y: -10, scale: 1.02 }}
                                        whileTap={{ scale: 0.98 }}
                                        onClick={() => startGame('quiz')}
                                        style={{
                                            padding: '2.5rem',
                                            borderRadius: '30px',
                                            background: 'linear-gradient(135deg, rgba(212, 175, 55, 0.15) 0%, rgba(212, 175, 55, 0.05) 100%)',
                                            border: '1px solid rgba(212, 175, 55, 0.3)',
                                            cursor: 'pointer',
                                            display: 'flex',
                                            flexDirection: 'column',
                                            alignItems: 'center',
                                            gap: '1.5rem',
                                            boxShadow: '0 15px 35px rgba(212, 175, 55, 0.1)'
                                        }}
                                    >
                                        <div style={{ background: 'rgba(212, 175, 55, 0.2)', padding: '1rem', borderRadius: '20px' }}>
                                            <BookOpen size={45} color="var(--primary)" />
                                        </div>
                                        <div style={{ textAlign: 'center' }}>
                                            <span style={{ color: 'white', fontSize: '1.4rem', fontWeight: '800', display: 'block', marginBottom: '0.4rem' }}>پرسیار و وەڵام</span>
                                            <span style={{ color: 'rgba(255,255,255,0.5)', fontSize: '0.95rem' }}>تاقیکردنەوەی زانیارییەکان</span>
                                        </div>
                                    </motion.button>
                                </div>
                            </motion.div>
                        )}

                        {gameState === 'playing' && (
                            <motion.div
                                key={`${gameMode}-${currentStage}`}
                                initial={{ opacity: 0, x: 20 }}
                                animate={{ opacity: 1, x: 0 }}
                                exit={{ opacity: 0, x: -20 }}
                                style={{ height: '100%', display: 'flex', flexDirection: 'column' }}
                            >
                                {/* Header */}
                                {gameMode !== 'prophets' && (
                                    <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '3rem' }}>
                                        <button onClick={resetGame} style={{ background: 'rgba(255,255,255,0.05)', border: '1px solid rgba(255,255,255,0.1)', padding: '0.6rem 1.2rem', borderRadius: '15px', color: 'white', cursor: 'pointer', display: 'flex', alignItems: 'center', gap: '0.5rem', fontSize: '0.9rem' }}>
                                            <ChevronLeft size={18} /> گەڕانەوە
                                        </button>
                                        {gameMode === 'quiz' && (
                                            <div style={{ color: 'var(--primary)', fontWeight: 'bold', fontSize: '1.2rem', display: 'flex', alignItems: 'center', gap: '0.5rem' }}>
                                                <Star size={20} fill="var(--primary)" /> {score}
                                            </div>
                                        )}
                                    </div>
                                )}

                                {/* Mode 1: Quiz */}
                                {gameMode === 'quiz' && (
                                    <div style={{ flex: 1 }}>
                                        <div style={{ color: 'var(--text-dim)', marginBottom: '1.5rem', fontWeight: 'bold', letterSpacing: '1px' }}>پرسیاری {currentStage + 1} / {quizQuestions.length}</div>
                                        <h3 style={{ fontSize: '1.8rem', marginBottom: '2.5rem', color: 'white', lineHeight: '1.5' }}>{quizQuestions[currentStage].question}</h3>
                                        <div style={{ display: 'grid', gap: '1.2rem' }}>
                                            {quizQuestions[currentStage].options.map((opt, i) => (
                                                <motion.button
                                                    key={i}
                                                    whileHover={{ x: -10, background: 'rgba(255,255,255,0.08)' }}
                                                    onClick={() => handleAnswer(i)}
                                                    style={{
                                                        padding: '1.5rem',
                                                        textAlign: 'right',
                                                        borderRadius: '20px',
                                                        border: selectedOption === i ? '2px solid var(--primary)' : '1px solid rgba(255,255,255,0.1)',
                                                        background: showExplanation && i === quizQuestions[currentStage].correct ? 'rgba(16, 185, 129, 0.15)' :
                                                            showExplanation && i === selectedOption ? 'rgba(239, 68, 68, 0.15)' : 'rgba(255,255,255,0.03)',
                                                        color: 'white',
                                                        cursor: showExplanation ? 'default' : 'pointer',
                                                        transition: 'all 0.3s',
                                                        fontSize: '1.1rem',
                                                        display: 'flex',
                                                        justifyContent: 'space-between',
                                                        alignItems: 'center'
                                                    }}
                                                >
                                                    {opt}
                                                    {showExplanation && i === quizQuestions[currentStage].correct && <CheckCircle2 size={20} color="#34d399" />}
                                                </motion.button>
                                            ))}
                                        </div>
                                        {showExplanation && (
                                            <motion.div initial={{ opacity: 0, y: 10 }} animate={{ opacity: 1, y: 0 }} style={{ marginTop: '2.5rem', padding: '2rem', background: 'rgba(212, 175, 55, 0.08)', borderRadius: '25px', border: '1px solid var(--primary)' }}>
                                                <div style={{ display: 'flex', alignItems: 'center', gap: '0.8rem', color: 'var(--primary)', marginBottom: '0.8rem', fontWeight: 'bold' }}>
                                                    <Info size={18} /> بیرخستنەوە
                                                </div>
                                                <p style={{ color: 'rgba(255,255,255,0.8)', marginBottom: '2rem', lineHeight: '1.8', fontSize: '1.1rem' }}>{quizQuestions[currentStage].explanation}</p>
                                                <button className="btn-primary" onClick={nextQuizQuestion} style={{ width: '100%', padding: '1.2rem' }}>پرسیاری دواتر</button>
                                            </motion.div>
                                        )}
                                    </div>
                                )}

                                {/* Mode 2: Ramadan Info (Professional Redesign) */}
                                {gameMode === 'ramadan' && (
                                    <div style={{ flex: 1, padding: '1rem' }}>
                                        <div style={{ display: 'grid', gridTemplateColumns: '300px 1fr', gap: '3rem', alignItems: 'center' }}>
                                            <motion.div
                                                key={`icon-${currentStage}`}
                                                initial={{ scale: 0.8, opacity: 0 }}
                                                animate={{ scale: 1, opacity: 1 }}
                                                style={{
                                                    height: '350px',
                                                    background: `linear-gradient(135deg, ${ramadanInfo[currentStage].color}22 0%, rgba(0,0,0,0.4) 100%)`,
                                                    borderRadius: '40px',
                                                    display: 'flex',
                                                    flexDirection: 'column',
                                                    alignItems: 'center',
                                                    justifyContent: 'center',
                                                    border: `1px solid ${ramadanInfo[currentStage].color}44`,
                                                    boxShadow: `0 20px 40px ${ramadanInfo[currentStage].color}11`
                                                }}
                                            >
                                                <div style={{ color: ramadanInfo[currentStage].color, marginBottom: '2rem', filter: `drop-shadow(0 0 10px ${ramadanInfo[currentStage].color}66)` }}>
                                                    {React.cloneElement(ramadanInfo[currentStage].icon, { size: 100 })}
                                                </div>
                                                <div style={{ textAlign: 'center' }}>
                                                    <h4 style={{ color: 'white', fontSize: '1.4rem', fontWeight: 'bold', marginBottom: '0.5rem' }}>{ramadanInfo[currentStage].subtitle}</h4>
                                                    <div style={{ width: '40px', height: '3px', background: ramadanInfo[currentStage].color, margin: '0 auto' }}></div>
                                                </div>
                                            </motion.div>

                                            <div>
                                                <div style={{ color: ramadanInfo[currentStage].color, fontSize: '0.9rem', fontWeight: 'bold', letterSpacing: '2px', marginBottom: '1rem' }}>SECTION 0{ramadanInfo[currentStage].id}</div>
                                                <h3 style={{ fontSize: '3rem', fontWeight: '900', color: 'white', marginBottom: '2rem' }}>{ramadanInfo[currentStage].title}</h3>
                                                <p style={{ fontSize: '1.2rem', color: 'rgba(255,255,255,0.7)', lineHeight: '1.9', marginBottom: '3rem' }}>{ramadanInfo[currentStage].content}</p>

                                                <div style={{ display: 'flex', flexWrap: 'wrap', gap: '1rem', marginBottom: '4rem' }}>
                                                    {ramadanInfo[currentStage].points.map((p, idx) => (
                                                        <div key={idx} style={{ padding: '0.6rem 1.2rem', background: 'rgba(255,255,255,0.05)', borderRadius: '12px', fontSize: '0.9rem', color: 'white', border: '1px solid rgba(255,255,255,0.1)', display: 'flex', alignItems: 'center', gap: '0.5rem' }}>
                                                            <CheckCircle2 size={16} color={ramadanInfo[currentStage].color} /> {p}
                                                        </div>
                                                    ))}
                                                </div>

                                                <button
                                                    onClick={nextRamadanInfo}
                                                    style={{
                                                        width: '100%',
                                                        padding: '1.5rem',
                                                        borderRadius: '20px',
                                                        background: ramadanInfo[currentStage].color,
                                                        color: 'white',
                                                        border: 'none',
                                                        fontSize: '1.2rem',
                                                        fontWeight: 'bold',
                                                        cursor: 'pointer',
                                                        boxShadow: `0 10px 20px ${ramadanInfo[currentStage].color}33`
                                                    }}
                                                >
                                                    {currentStage < ramadanInfo.length - 1 ? 'زانیاری دواتر' : 'تەواوبوونی گەشت'}
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                )}

                                {/* Mode 3: Prophet Stories (Expanded with Good Points) */}
                                {gameMode === 'prophets' && (
                                    <div style={{ display: 'flex', height: '650px', background: 'rgba(0,0,0,0.2)' }}>
                                        {/* Left Sidebar: List of Stories (Longer & Better) */}
                                        <div style={{
                                            width: '320px',
                                            borderRight: '1px solid rgba(255,255,255,0.08)',
                                            padding: '2rem',
                                            overflowY: 'auto',
                                            background: 'rgba(15, 23, 42, 0.4)',
                                            scrollbarWidth: 'thin'
                                        }}>
                                            <button onClick={resetGame} style={{ background: 'rgba(255,255,255,0.05)', border: 'none', color: 'white', padding: '0.8rem 1.2rem', borderRadius: '15px', cursor: 'pointer', marginBottom: '2.5rem', display: 'flex', alignItems: 'center', gap: '0.8rem', width: '100%', fontSize: '0.9rem' }}>
                                                <ChevronLeft size={18} /> گەڕانەوە بۆ سەرەتا
                                            </button>
                                            <h4 style={{ color: 'var(--primary)', marginBottom: '2rem', fontSize: '0.8rem', fontWeight: 'bold', letterSpacing: '2px', textAlign: 'center' }}>فێرگەی پێغەمبەران</h4>
                                            <div style={{ display: 'flex', flexDirection: 'column', gap: '0.8rem' }}>
                                                {prophetStories.map((p, idx) => (
                                                    <motion.button
                                                        key={p.id}
                                                        whileHover={{ x: -5 }}
                                                        onClick={() => setSelectedProphetIndex(idx)}
                                                        style={{
                                                            padding: '1.2rem',
                                                            textAlign: 'right',
                                                            background: selectedProphetIndex === idx ? 'linear-gradient(135deg, rgba(139, 92, 246, 0.2) 0%, rgba(139, 92, 246, 0.05) 100%)' : 'rgba(255,255,255,0.02)',
                                                            border: selectedProphetIndex === idx ? '1px solid rgba(139, 92, 246, 0.5)' : '1px solid rgba(255,255,255,0.05)',
                                                            borderRadius: '18px',
                                                            color: selectedProphetIndex === idx ? 'white' : 'rgba(255,255,255,0.4)',
                                                            cursor: 'pointer',
                                                            display: 'flex',
                                                            alignItems: 'center',
                                                            justifyContent: 'space-between',
                                                            transition: 'all 0.3s cubic-bezier(0.4, 0, 0.2, 1)'
                                                        }}
                                                    >
                                                        <span style={{ filter: selectedProphetIndex === idx ? 'none' : 'grayscale(1)', transform: selectedProphetIndex === idx ? 'scale(1.2)' : 'scale(1)', transition: 'all 0.3s' }}>{p.icon}</span>
                                                        <span style={{ fontWeight: selectedProphetIndex === idx ? 'bold' : '500', fontSize: '1rem' }}>{p.title}</span>
                                                    </motion.button>
                                                ))}
                                            </div>
                                        </div>

                                        {/* Right Side: Detailed Story & Lessons */}
                                        <div style={{ flex: 1, padding: '4rem', overflowY: 'auto', background: 'rgba(2, 6, 23, 0.3)' }}>
                                            <AnimatePresence mode="wait">
                                                <motion.div
                                                    key={prophetStories[selectedProphetIndex].id}
                                                    initial={{ opacity: 0, scale: 0.98 }}
                                                    animate={{ opacity: 1, scale: 1 }}
                                                    exit={{ opacity: 0, scale: 1.02 }}
                                                >
                                                    <div style={{ display: 'flex', alignItems: 'center', justifyContent: 'center', gap: '2rem', marginBottom: '3rem' }}>
                                                        <div style={{ fontSize: '5rem' }}>{prophetStories[selectedProphetIndex].icon}</div>
                                                        <div style={{ textAlign: 'right' }}>
                                                            <h3 style={{ fontSize: '3rem', fontWeight: '900', color: 'white', margin: 0 }}>{prophetStories[selectedProphetIndex].title}</h3>
                                                            <div style={{ color: '#8b5cf6', fontWeight: 'bold', fontSize: '1rem', marginTop: '0.5rem', letterSpacing: '1px' }}>چیرۆکی مەزن و وانەی پڕبایەخ</div>
                                                        </div>
                                                    </div>

                                                    {/* Story Content */}
                                                    <div style={{ background: 'rgba(255,255,255,0.03)', padding: '2.5rem', borderRadius: '30px', border: '1px solid rgba(255,255,255,0.05)', marginBottom: '3rem' }}>
                                                        <p style={{ fontSize: '1.25rem', color: 'rgba(255,255,255,0.85)', lineHeight: '2.2', textAlign: 'right', whiteSpace: 'pre-wrap' }}>
                                                            {prophetStories[selectedProphetIndex].content}
                                                        </p>
                                                    </div>

                                                    {/* Lessons Section (The Good Points) */}
                                                    <div style={{ marginBottom: '4rem' }}>
                                                        <div style={{ display: 'flex', alignItems: 'center', gap: '1rem', color: '#8b5cf6', marginBottom: '2rem', justifyContent: 'flex-end' }}>
                                                            <span style={{ fontSize: '1.3rem', fontWeight: 'bold' }}>گرنگترین وانەکان</span>
                                                            <Bookmark size={24} fill="#8b5cf6" />
                                                        </div>
                                                        <div style={{ display: 'grid', gridTemplateColumns: '1fr', gap: '1rem' }}>
                                                            {prophetStories[selectedProphetIndex].lessons.map((lesson, lIdx) => (
                                                                <motion.div
                                                                    key={lIdx}
                                                                    initial={{ opacity: 0, x: 20 }}
                                                                    animate={{ opacity: 1, x: 0 }}
                                                                    transition={{ delay: 0.2 + (lIdx * 0.1) }}
                                                                    style={{
                                                                        padding: '1.5rem',
                                                                        background: 'rgba(139, 92, 246, 0.05)',
                                                                        borderRadius: '20px',
                                                                        border: '1px solid rgba(139, 92, 246, 0.15)',
                                                                        color: 'white',
                                                                        textAlign: 'right',
                                                                        fontSize: '1.1rem',
                                                                        display: 'flex',
                                                                        alignItems: 'center',
                                                                        justifyContent: 'flex-end',
                                                                        gap: '1rem'
                                                                    }}
                                                                >
                                                                    {lesson}
                                                                    <CheckCircle2 size={20} color="#8b5cf6" />
                                                                </motion.div>
                                                            ))}
                                                        </div>
                                                    </div>

                                                    <div style={{ textAlign: 'center' }}>
                                                        <button className="btn-primary" onClick={() => setGameState('finished')} style={{ background: '#8b5cf6', borderColor: '#8b5cf6', padding: '1.2rem 4rem', borderRadius: '20px', fontSize: '1.1rem' }}>
                                                            تەواوبوونی ئەم گەشتە
                                                        </button>
                                                    </div>
                                                </motion.div>
                                            </AnimatePresence>
                                        </div>
                                    </div>
                                )}
                            </motion.div>
                        )}

                        {gameState === 'finished' && (
                            <motion.div
                                key="finish"
                                initial={{ opacity: 0, scale: 0.9 }}
                                animate={{ opacity: 1, scale: 1 }}
                                style={{ textAlign: 'center' }}
                            >
                                <motion.div animate={{ rotate: [0, 10, -10, 0] }} transition={{ repeat: Infinity, duration: 2 }}>
                                    <Star size={90} color="var(--primary)" fill="var(--primary)" style={{ marginBottom: '2.5rem', filter: 'drop-shadow(0 0 20px var(--primary-glow))' }} />
                                </motion.div>
                                <h3 style={{ fontSize: '3rem', fontWeight: '900', marginBottom: '1.5rem', color: 'white' }}>دەستخۆش! گەشتەکە تەواو بوو</h3>
                                {gameMode === 'quiz' ? (
                                    <p style={{ fontSize: '1.8rem', color: 'var(--primary)', marginBottom: '3rem', fontWeight: 'bold' }}>تۆ {score} خاڵت کۆکردەوە!</p>
                                ) : (
                                    <p style={{ fontSize: '1.3rem', color: 'var(--text-dim)', marginBottom: '3.5rem', maxWidth: '600px', margin: '0 auto 3.5rem' }}>هیوادارین سودت لەم زانیاریانە بینرابێت و ببێتە هۆکارێک بۆ گەشەی ڕۆحیت.</p>
                                )}
                                <div style={{ display: 'flex', gap: '1.5rem', justifyContent: 'center' }}>
                                    <button className="btn-primary" onClick={() => startGame(gameMode)} style={{ padding: '1.2rem 2.5rem' }}>دووبارە دەستپێکردن</button>
                                    <button className="btn-secondary" onClick={resetGame} style={{ padding: '1.2rem 2.5rem' }}>گەڕانەوە بۆ سەرەتا</button>
                                </div>
                            </motion.div>
                        )}
                    </AnimatePresence>
                </div>
            </div>
        </section>
    );
};

export default ImanQuest;
